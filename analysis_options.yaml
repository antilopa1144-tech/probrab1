# This file configures the analyzer, which statically analyzes Dart code to
# check for errors, warnings, and lints.
#
# The issues identified by the analyzer are surfaced in the UI of Dart-enabled
# IDEs (https://dart.dev/tools#ides-and-editors). The analyzer can also be
# invoked from the command line by running `flutter analyze`.

# The following line activates a set of recommended lints for Flutter apps,
# packages, and plugins designed to encourage good coding practices.
include: package:flutter_lints/flutter.yaml

analyzer:
  exclude:
    - "**/*.g.dart"
    - "**/*.freezed.dart"
  errors:
    # Treat missing required parameters as errors
    missing_required_param: error
    # Treat missing return types as errors
    always_declare_return_types: error
    # Treat unused imports as errors
    unused_import: warning
    # Treat unused elements as warnings
    unused_element: warning
    # Treat unused local variables as warnings
    unused_local_variable: warning

linter:
  # Строгие правила для улучшения качества кода
  rules:
    # === Стиль кода ===
    # Всегда объявлять типы возвращаемых значений
    always_declare_return_types: true
    # Использовать const конструкторы где возможно
    prefer_const_constructors: true
    prefer_const_constructors_in_immutables: true
    prefer_const_declarations: true
    prefer_const_literals_to_create_immutables: true
    # Использовать одинарные кавычки
    prefer_single_quotes: true
    # Использовать trailing commas для лучшего форматирования
    require_trailing_commas: true
    # Избегать ненужных скобок
    unnecessary_brace_in_string_interps: true
    unnecessary_string_interpolations: true

    # === Безопасность и правильность ===
    # Избегать print в продакшене
    avoid_print: true
    # Избегать динамических вызовов
    avoid_dynamic_calls: true
    # Избегать пустых catch блоков
    avoid_catching_errors: true
    # Избегать возвращения null из non-nullable функций
    avoid_returning_null_for_void: true
    # Использовать super parameters где возможно
    use_super_parameters: true

    # === Производительность ===
    # Избегать медленных async операций в синхронных функциях
    avoid_slow_async_io: true
    # Использовать коллекции вместо литералов
    prefer_collection_literals: true
    # Использовать spread collections
    prefer_spread_collections: true
    # Использовать if null operators
    prefer_if_null_operators: true
    # Избегать ненужных await
    unnecessary_await_in_return: true
    # Предпочитать for-in loops
    prefer_for_elements_to_map_fromIterable: true
    prefer_iterable_whereType: true

    # === Читаемость ===
    # Использовать raw strings для регулярных выражений
    use_raw_strings: true
    # Избегать пустых else блоков
    avoid_empty_else: true
    # Избегать ненужных null checks
    unnecessary_null_checks: true
    # Использовать is empty для проверки пустоты
    prefer_is_empty: true
    prefer_is_not_empty: true
    # Избегать ненужных условных операторов
    unnecessary_nullable_for_final_variable_declarations: true

    # === Документация ===
    # Документировать публичные API
    # public_member_api_docs: true  # Раскомментируйте когда будете готовы

    # === Immutability ===
    # Предпочитать final для локальных переменных
    prefer_final_locals: true
    prefer_final_fields: true
    prefer_final_in_for_each: true

    # === Обработка ошибок ===
    # Избегать catch блоков без on
    avoid_catches_without_on_clauses: false  # Слишком строго для начала
    # Использовать rethrow вместо throw в catch
    use_rethrow_when_possible: true
    # Избегать пустых catch блоков
    # avoid_empty_catches: true

    # === Null safety ===
    # Избегать null checks на non-nullable переменных
    unnecessary_null_in_if_null_operators: true
    # Использовать ?. вместо != null
    prefer_null_aware_operators: true
    # Избегать ненужных null-aware операторов
    # unnecessary_null_aware_operators: true

    # === Дополнительные правила ===
    # Избегать дублирования кода
    no_duplicate_case_values: true
    # Избегать использования == для сравнения с null
    prefer_relative_imports: true
    # Использовать assert в debug режиме
    prefer_asserts_in_initializer_lists: true
    # Избегать ненужных getters
    unnecessary_getters_setters: true

# Additional information about this file can be found at
# https://dart.dev/guides/language/analysis-options
