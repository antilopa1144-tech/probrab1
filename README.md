# Мастерок — строительные калькуляторы для Android

<div align="center">

**68+ калькуляторов** | **ИИ-прораб Михалыч** | **Работает без интернета** | **Рейтинг 4.9 в RuStore**

[Скачать в RuStore](https://www.rustore.ru/catalog/app/ru.masterok.app) | [Веб-версия](https://masterok-calc.ru) | [Статья на Хабре](https://habr.com/ru/articles/1001080/)

</div>

---

## О проекте

**Мастерок** — мобильное приложение для расчёта строительных материалов. Создано для прорабов, строителей и тех, кто делает ремонт своими руками. Все расчёты основаны на нормах ГОСТ, СНиП и рекомендациях производителей.

**Цель:** один инструмент вместо десятков разрозненных калькуляторов. Пришёл на объект — открыл — посчитал — пошёл в магазин.

## Что внутри

### 68+ калькуляторов по категориям

| Категория | Кол-во | Примеры |
|-----------|--------|---------|
| Фундамент | 5 | Бетон, ленточный, плитный, отмостка, подвал |
| Стены | 12 | Кирпич, газобетон, ГКЛ, перегородки, панели, штукатурка, шпаклёвка |
| Полы | 8 | Стяжка, ламинат, плитка, линолеум, наливной пол, тёплый пол |
| Потолки | 5 | Натяжной, подвесной, реечный, кассетный, утепление |
| Кровля | 4 | Металлочерепица, профнастил, мягкая кровля, стропильная система |
| Отделка | 10 | Обои, покраска, вагонка, двери, окна, откосы, балкон, мансарда |
| Фасад | 4 | Сайдинг, утепление СФТК, облицовочный кирпич, вентфасад |
| Инженерные | 5 | Электрика, водопровод, отопление, вентиляция, гидроизоляция |

### Возможности

- **Михалыч** — ИИ-ассистент с характером ворчливого прораба. Отвечает на вопросы по технологии, нормам, материалам. Работает через OpenRouter API.
- **Чек-листы** — пошаговые инструкции для типовых работ (стяжка, плитка, ГКЛ и др.)
- **Конвертер единиц** — длина, площадь, объём, масса
- **PDF-экспорт** — результаты расчёта в PDF для магазина или заказчика
- **История расчётов** — все прошлые расчёты сохраняются локально
- **Избранное** — быстрый доступ к часто используемым калькуляторам
- **Тёмная тема** — Material You 3 с динамическими цветами
- **Офлайн** — всё работает без интернета (кроме ИИ)

## Технический стек

| Компонент | Технология |
|-----------|------------|
| Framework | Flutter 3.38 / Dart 3.10 |
| State Management | Riverpod 3 |
| БД | Isar Community (NoSQL, офлайн) |
| ИИ | OpenRouter → Gemini Flash |
| Аналитика | Firebase Analytics + Crashlytics |
| Дизайн | Material You 3, dynamic themes |
| Тестирование | 8000+ тестов (unit + widget) |

## Архитектура

Clean Architecture с чётким разделением слоёв:

```
lib/
├── core/              # Инфраструктура: темы, локализация, виджеты
│   ├── themes/        # AppColors, AppTypography
│   ├── widgets/       # Общие компоненты
│   └── services/      # AI, PDF, аналитика
├── domain/            # Бизнес-логика (не зависит от UI)
│   ├── usecases/      # Формулы расчётов (68+ файлов)
│   ├── calculators/   # V2 Definition — метаданные, поля, единицы
│   │   └── definitions/
│   └── entities/      # Модели данных
├── data/              # Репозитории, источники данных
└── presentation/      # UI
    ├── views/         # Экраны
    ├── providers/     # Riverpod провайдеры
    └── widgets/       # UI-компоненты
```

### Система калькуляторов V2

Каждый калькулятор состоит из двух частей:

1. **UseCase** (`domain/usecases/`) — чистая функция с формулами расчёта
2. **Definition** (`domain/calculators/definitions/`) — декларативное описание полей ввода, единиц, ограничений

UI генерируется автоматически из Definition. Чтобы добавить новый калькулятор — достаточно написать UseCase и Definition, без единой строки UI-кода.

## Запуск

### Требования

- Flutter SDK >= 3.10.0
- Dart >= 3.0.0
- Android Studio / VS Code

### Установка

```bash
git clone https://github.com/antilopa1144-tech/probrab1.git
cd probrab1
flutter pub get
dart run build_runner build --delete-conflicting-outputs
flutter run
```

### Сборка

```bash
# Debug APK
flutter run

# Release APK
flutter build apk --release

# App Bundle (RuStore)
flutter build appbundle --release
```

### Тесты

```bash
# Все тесты
flutter test

# С покрытием
flutter test --coverage

# Анализ кода
flutter analyze
```

## Метрики проекта

| Метрика | Значение |
|---------|----------|
| Файлов Dart | 470+ |
| Строк кода (lib/) | 130,000+ |
| Строк тестов | 134,000+ |
| Калькуляторов | 68+ |
| Ключей локализации | 1650+ |
| Размер APK | 19 Мб |

## Веб-версия

Параллельно развивается [веб-версия](https://masterok-calc.ru) на Next.js — 50+ калькуляторов доступны онлайн бесплатно.

## Обратная связь

Нашли ошибку в расчёте, есть идея или предложение — пишите:

- **Email:** [Antilopa1144@gmail.com](mailto:Antilopa1144@gmail.com)
- **RuStore:** [Мастерок](https://www.rustore.ru/catalog/app/ru.masterok.app)
- **Хабр:** [Статья о проекте](https://habr.com/ru/articles/1001080/)

## Лицензия

MIT License
