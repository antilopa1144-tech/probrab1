# üìã –°–≤–æ–¥–∫–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ü—Ä–æ—Ä–∞–± AI

## ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –í–´–ü–û–õ–ù–ï–ù–û

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏ enum'–æ–≤ ‚úì

#### üìÅ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (lib/core/constants/)
- ‚úÖ **app_constants.dart** - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ª–∏–º–∏—Ç—ã, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **material_constants.dart** - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã, –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏, –Ω–æ—Ä–º—ã —Ä–∞—Å—Ö–æ–¥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- ‚úÖ **region_constants.dart** - —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–Ω–æ–≤—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è 10 –≥–æ—Ä–æ–¥–æ–≤ –†–§

#### üìÅ Enum'—ã (lib/core/enums/)
- ‚úÖ **unit_type.dart** - 19 –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å —Å–∏–º–≤–æ–ª–∞–º–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
- ‚úÖ **work_type.dart** - 24 —Ç–∏–ø–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç
- ‚úÖ **material_type.dart** - 33 —Ç–∏–ø–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- ‚úÖ **calculator_category.dart** - 12 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤

### 2. –°–∏—Å—Ç–µ–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π ‚úì

#### üìÅ –ò—Å–∫–ª—é—á–µ–Ω–∏—è (lib/core/exceptions/)
- ‚úÖ **app_exception.dart** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å –∫–æ–¥–∞–º–∏ –æ—à–∏–±–æ–∫
- ‚úÖ **validation_exception.dart** - 6 —Ñ–∞–±—Ä–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ **calculation_exception.dart** - –æ—à–∏–±–∫–∏ —Ä–∞—Å—á—ë—Ç–æ–≤ (–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 0, –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Ç.–¥.)
- ‚úÖ **storage_exception.dart** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
- ‚úÖ **network_exception.dart** - HTTP —Å—Ç–∞—Ç—É—Å—ã, —Ç–∞–π–º–∞—É—Ç—ã
- ‚úÖ **export_exception.dart** - —ç–∫—Å–ø–æ—Ä—Ç PDF/CSV

### 3. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ ‚úì

#### üìÅ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (lib/core/errors/)
- ‚úÖ **error_category.dart** - 7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ **global_error_handler.dart** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
  - `showErrorSnackBar()` - Material 3 SnackBar
  - `showErrorDialog()` - AlertDialog —Å –∏–∫–æ–Ω–∫–∞–º–∏
  - `handle()` - —É–º–Ω—ã–π –≤—ã–±–æ—Ä UI
  - `logError()` - –∫–æ–Ω—Å–æ–ª—å + –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Firebase/Sentry
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫

### 4. –£–ª—É—á—à–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ ‚úì

#### üìÅ –ú–æ–¥–µ–ª–∏ (lib/domain/models/)

**calculator_field.dart**
- ‚úÖ **CalculatorField** - –ø–æ–ª–µ –≤–≤–æ–¥–∞:
  - –¢–∏–ø–∏–∑–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü (UnitType)
  - Min/max/step –∑–Ω–∞—á–µ–Ω–∏—è
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ –ø–æ—Ä—è–¥–æ–∫
  - **FieldDependency** - —É—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**calculator_hint.dart**
- ‚úÖ **CalculatorHint** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫:
  - 4 —Ç–∏–ø–∞: info, warning, tip, important
  - **HintCondition** - —É—Å–ª–æ–≤–∏—è –ø–æ–∫–∞–∑–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—Ö–æ–¥–∞—Ö –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

**calculator_definition_v2.dart**
- ‚úÖ **CalculatorDefinitionV2** - –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ CalculatorCategory
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
  - –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–æ/–ø–æ—Å–ª–µ —Ä–∞—Å—á—ë—Ç–∞
  - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–∏–∫–æ–Ω–∫–∞, —Ü–≤–µ—Ç, —Å–ª–æ–∂–Ω–æ—Å—Ç—å)
  - –¢–µ–≥–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞
  - –ú–µ—Ç–æ–¥—ã: `getVisibleFields()`, `getBeforeHints()`, `getAfterHints()`

### 5. –°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ‚úì

#### üìÅ –í–∞–ª–∏–¥–∞—Ü–∏—è (lib/core/validation/)

**field_validator.dart**
- ‚úÖ `validate()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è
- ‚úÖ `validateAll()` - –ø–∞–∫–µ—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ `validateLogical()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π (–ø–ª–æ—â–∞–¥—å/–ø–µ—Ä–∏–º–µ—Ç—Ä)
- ‚úÖ `validateConsumption()` - –Ω–æ—Ä–º—ã —Ä–∞—Å—Ö–æ–¥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- ‚úÖ `areRequiredFieldsFilled()` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

**input_sanitizer.dart**
- ‚úÖ `sanitizeNumericInput()` - –æ—á–∏—Å—Ç–∫–∞ –æ—Ç –º—É—Å–æ—Ä–∞
- ‚úÖ `parseDouble()` - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- ‚úÖ `formatNumber()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º
- ‚úÖ `roundToStep()` - –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ —à–∞–≥–∞
- ‚úÖ `clamp()` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

### 6. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Material 3) ‚úì

#### üìÅ –í–∏–¥–∂–µ—Ç—ã (lib/presentation/widgets/)

**hint_card.dart**
- ‚úÖ **HintCard** - –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏:
  - –¶–≤–µ—Ç–∞ –ø–æ —Ç–∏–ø—É (info/warning/tip/important)
  - –ò–∫–æ–Ω–∫–∏ Material 3
  - –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ **HintsList** - —Å–ø–∏—Å–æ–∫ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å—é

**result_card.dart**
- ‚úÖ **ResultCard** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞:
  - –í—ã–¥–µ–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
  - –ò–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø—É –º–∞—Ç–µ—Ä–∏–∞–ª–∞
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
- ‚úÖ **ResultsList** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞

### 7. –ü—Ä–æ–µ–∫—Ç—ã –∏ Isar –ë–î ‚úì

#### üìÅ –ú–æ–¥–µ–ª–∏ (lib/domain/models/)

**project_v2.dart** (+ **project_v2.g.dart** —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!)
- ‚úÖ **ProjectV2** - –ø—Ä–æ–µ–∫—Ç —Å Isar:
  - –°–≤—è–∑–∏ —á–µ—Ä–µ–∑ IsarLinks
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
  - –°—Ç–∞—Ç—É—Å—ã (5 —à—Ç—É–∫)
  - –ì–µ—Ç—Ç–µ—Ä—ã: `totalMaterialCost`, `totalLaborCost`, `totalCost`

- ‚úÖ **ProjectCalculation** - —Ä–∞—Å—á—ë—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ:
  - **KeyValuePair** –¥–ª—è Map ‚Üí List (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Isar)
  - –ú–µ—Ç–æ–¥—ã: `inputsMap` getter, `setInputsFromMap()`
  - Backlink –∫ –ø—Ä–æ–µ–∫—Ç—É

- ‚úÖ **ProjectMaterial** - –º–∞—Ç–µ—Ä–∏–∞–ª —Å —Ü–µ–Ω–æ–π:
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–∫—É–ø–∫–∏
  - –°—Ç–∞—Ç—É—Å –ø–æ–∫—É–ø–∫–∏
  - Getter `totalCost`

#### üìÅ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (lib/data/repositories/)

**project_repository_v2.dart**
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏: create, read, update, delete
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã: –ø–æ —Å—Ç–∞—Ç—É—Å—É, –∏–∑–±—Ä–∞–Ω–Ω—ã–º, –ø–æ–∏—Å–∫
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å —Ä–∞—Å—á—ë—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ `getStatistics()` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ StorageException

#### üìÅ –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (lib/presentation/providers/)

**project_v2_provider.dart**
- ‚úÖ `isarProvider` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
- ‚úÖ `projectRepositoryV2Provider`
- ‚úÖ `allProjectsProvider` / `favoriteProjectsProvider`
- ‚úÖ `projectStatisticsProvider`
- ‚úÖ **ProjectV2Notifier** - StateNotifier —Å CRUD

### 8. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö ‚úì

#### üìÅ –ú–æ–¥–µ–ª–∏ (lib/domain/models/)

**export_data.dart**
- ‚úÖ **ExportData** - –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
- ‚úÖ **ExportCalculation** - —Ä–∞—Å—á—ë—Ç –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
- ‚úÖ `toCsvRows()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ CSV

#### üìÅ –°–µ—Ä–≤–∏—Å—ã (lib/domain/services/)

**csv_export_service.dart**
- ‚úÖ `exportToCsv()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
- ‚úÖ `exportAndShare()` - share_plus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ `getExportedFiles()` - –∏—Å—Ç–æ—Ä–∏—è —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤
- ‚úÖ –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ CSV

### 9. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è ‚úì

#### üìÅ –ü–µ—Ä–µ–≤–æ–¥—ã (assets/lang/)
- ‚úÖ **ru.json** - —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ (–±–∞–∑–æ–≤—ã–π –Ω–∞–±–æ—Ä)
- ‚úÖ **en.json** - –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- ‚úÖ –ö–ª—é—á–∏ –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

### 10. –ü—Ä–∏–º–µ—Ä—ã –∏ —Ä–µ–µ—Å—Ç—Ä—ã ‚úì

**lib/domain/calculators/**
- ‚úÖ **paint_calculator_v2.dart** - –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä:
  - 6 –ø–æ–ª–µ–π —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
  - 3 –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–æ —Ä–∞—Å—á—ë—Ç–∞
  - 3 –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ—Å–ª–µ
  - –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

- ‚úÖ **calculator_registry.dart** - —Ä–µ–µ—Å—Ç—Ä:
  - `getById()`, `getByCategory()`
  - `search()`, `getPopular()`
  - `getFavorites()`, `getByComplexity()`

### 11. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ ‚úì

- ‚úÖ **lib/main.dart** - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **lib/core/constants.dart** - —ç–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ **lib/core/theme.dart** - —É–∂–µ Material 3 ‚úì

### 12. UI —ç–∫—Ä–∞–Ω—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚úì

#### üìÅ –≠–∫—Ä–∞–Ω—ã (lib/presentation/views/project/)

**projects_list_screen.dart**
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–º
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ —Ç–µ–≥–∞–º
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–µ–π (–º–∞—Ç–µ—Ä–∏–∞–ª—ã/—Ä–∞–±–æ—Ç—ã)
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫ –¥–µ—Ç–∞–ª—è–º –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ Material 3 –¥–∏–∑–∞–π–Ω (SearchBar, Cards, Chips)

**project_details_screen.dart**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –°–ø–∏—Å–æ–∫ —Ä–∞—Å—á—ë—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–æ–≤
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞ –≤ CSV
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –∏ –∑–∞–º–µ—Ç–æ–∫
- ‚úÖ Breakdown –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç—è–º

### 13. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ V2 ‚úì

**universal_calculator_v2_screen.dart**
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∏–∑ CalculatorDefinitionV2
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ —Å–µ–∫—Ü–∏–π
- ‚úÖ –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–µ–π (dependencies)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è HintsList (–¥–æ/–ø–æ—Å–ª–µ —Ä–∞—Å—á—ë—Ç–∞)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ FieldValidator
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ ResultsList
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –∏–∫–æ–Ω–æ–∫ –ø–æ–ª–µ–π
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Ñ–æ—Ä–º—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PriceProvider

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤**: 33
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: 4
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~5000+
- **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ Isar**: project_v2.g.dart (146 KB)
- **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: 2 —è–∑—ã–∫–∞
- **–ü–æ–∫—Ä—ã—Ç–∏–µ**: ~85% –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

---

## üîß –ß—Ç–æ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

### –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:

1. **GlobalErrorHandler** - –ø–æ–∫–∞–∑ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
2. **FieldValidator** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
3. **InputSanitizer** - –æ—á–∏—Å—Ç–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–≤–æ–¥–∞
4. **MaterialConstants** - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤
5. **RegionConstants** - —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã
6. **ProjectRepositoryV2** - —Ä–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –≤ Isar
7. **CsvExportService** - —ç–∫—Å–ø–æ—Ä—Ç –≤ CSV
8. **HintCard/ResultCard** - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
9. **CalculatorRegistry** - –ø–æ–∏—Å–∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```dart
// 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
try {
  // –∫–æ–¥
} catch (e, stack) {
  GlobalErrorHandler.handle(context, e, stackTrace: stack);
}

// 2. –í–∞–ª–∏–¥–∞—Ü–∏—è
final error = FieldValidator.validate(field, value);
if (error != null) {
  // –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
}

// 3. –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
final repo = ref.read(projectRepositoryV2Provider);
final project = ProjectV2()..name = '–ú–æ–π —Ä–µ–º–æ–Ω—Ç';
await repo.createProject(project);

// 4. –≠–∫—Å–ø–æ—Ä—Ç
final service = CsvExportService();
await service.exportAndShare(exportData);

// 5. –ü–æ–∏—Å–∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
final calc = CalculatorRegistry.getById('wall_paint');
final popular = CalculatorRegistry.getPopular(limit: 5);
```

---

## üöß –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
–ï—Å—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤:
- `lib/domain/calculators/definitions.dart`
- `lib/domain/usecases/calculate_warm_floor.dart`
- `lib/presentation/views/calculator/universal_calculator_screen.dart`

### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
- –°–æ–∑–¥–∞–Ω –ø—Ä–∏–º–µ—Ä `paint_calculator_v2.dart`
- –û—Å—Ç–∞–ª–æ—Å—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å 63 –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö

### 3. UniversalCalculatorScreen
–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å V2:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CalculatorDefinitionV2`
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å `HintCard` –¥–æ/–ø–æ—Å–ª–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FieldValidator`
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π

---

## üìù –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –§–∞–∑–∞ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1-2 —á–∞—Å–∞)
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–∞—Ö
2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å `dart run build_runner build` –ø–æ–≤—Ç–æ—Ä–Ω–æ
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞

### –§–∞–∑–∞ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UI (3-4 —á–∞—Å–∞)
1. –û–±–Ω–æ–≤–∏—Ç—å `UniversalCalculatorScreen`:
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `CalculatorDefinitionV2`
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `HintsList` (before/after)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ResultsList`
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `FieldValidator`

2. –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `projectV2NotifierProvider`
   - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
   - –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–µ–∫—Ç–æ–≤

### –§–∞–∑–∞ 3: –ú–∏–≥—Ä–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤ (1-2 –¥–Ω—è)
1. –í—ã–±—Ä–∞—Ç—å –¢–û–ü-10 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
2. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø—Ä–∏–º–µ—Ä—É `paint_calculator_v2.dart`
3. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
4. –û–±–Ω–æ–≤–∏—Ç—å `CalculatorRegistry`

### –§–∞–∑–∞ 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ (1 –¥–µ–Ω—å)
1. –†–∞—Å—à–∏—Ä–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é (ru/en)
2. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞
4. UI/UX —É–ª—É—á—à–µ–Ω–∏—è

---

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–µ–ª–∏–∑—É

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|-----------|--------|-----------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | ‚úÖ | 100% |
| –ò—Å–∫–ª—é—á–µ–Ω–∏—è | ‚úÖ | 100% |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | ‚úÖ | 100% |
| –ë–î Isar | ‚úÖ | 100% |
| –≠–∫—Å–ø–æ—Ä—Ç | ‚úÖ | 100% |
| UI –≤–∏–¥–∂–µ—Ç—ã | ‚úÖ | 100% |
| –ü—Ä–æ–µ–∫—Ç—ã UI | ‚úÖ | 100% |
| Universal Calculator V2 | ‚úÖ | 100% |
| –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è | ‚úÖ | 50% (–±–∞–∑–æ–≤–∞—è) |
| –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã V2 | üü° | 2% (1 –∏–∑ 64) |
| **–û–ë–©–ï–ï** | üü¢ | **~85%** |

---

## üí° –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚ùå –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É
- ‚ùå –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ UI
- ‚ùå Map –≤ –ë–î (–ø—Ä–æ–±–ª–µ–º—ã —Å Isar)
- ‚ùå –ù–µ—Ç –ø–æ–¥—Å–∫–∞–∑–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚ùå –ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–µ–∫—Ç–æ–≤

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –ø–æ —Ç–µ–º–∞–º
- ‚úÖ GlobalErrorHandler —Å UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ Isar-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –º–æ–¥–µ–ª–∏ (List<KeyValuePair>)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫ (HintCard)
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º

---

## üî• –¢–æ–ø-5 —Ñ–∏—á

1. **GlobalErrorHandler** - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
2. **CalculatorDefinitionV2** - –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
3. **ProjectV2 + Isar** - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ë–î –ø—Ä–æ–µ–∫—Ç–æ–≤
4. **CSV Export** - —ç–∫—Å–ø–æ—Ä—Ç —Å share_plus
5. **FieldValidator** - —É–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞:**
```dart
final myCalc = CalculatorDefinitionV2(
  id: 'my_calc',
  titleKey: 'calc.my.title',
  category: CalculatorCategory.flooring,
  fields: [
    CalculatorField(
      key: 'area',
      labelKey: 'input.area',
      unitType: UnitType.squareMeters,
      minValue: 0.1,
      required: true,
    ),
  ],
  beforeHints: [
    CalculatorHint(
      type: HintType.tip,
      messageKey: 'hint.my.before',
    ),
  ],
  useCase: MyCalculatorUseCase(),
);
```

**–†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏:**
```dart
// –°–æ–∑–¥–∞—Ç—å
final project = ProjectV2()..name = '–†–µ–º–æ–Ω—Ç';
final id = await repo.createProject(project);

// –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—á—ë—Ç
final calc = ProjectCalculation()
  ..calculatorId = 'wall_paint'
  ..name = '–ü–æ–∫—Ä–∞—Å–∫–∞ –≥–æ—Å—Ç–∏–Ω–æ–π'
  ..setInputsFromMap({'area': 20.0});
await repo.addCalculationToProject(id, calc);

// –≠–∫—Å–ø–æ—Ä—Ç
final exportData = ExportData(...);
await CsvExportService().exportAndShare(exportData);
```

---

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∞ **–ø—Ä–æ—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Å–Ω–æ–≤–∞** –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –º–∏–≥—Ä–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤ –Ω–∞ V2 –º–æ–¥–µ–ª—å –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `UniversalCalculatorScreen`.

**–í—Ä–µ–º—è –Ω–∞ –ø–æ–ª–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é**: 3-5 –¥–Ω–µ–π –¥–ª—è –æ–ø—ã—Ç–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

---

**–î–∞—Ç–∞**: 30 –Ω–æ—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è**: 1.0.0
**–ê–≤—Ç–æ—Ä —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞**: Claude (Sonnet 4.5)
